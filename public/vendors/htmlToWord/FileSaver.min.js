var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=function(){return e.URL||e.webkitURL||e},o=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r=!e.externalHost&&"download"in o,i=function(n){var o=t.createEvent("MouseEvents");o.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(o)},a=e.webkitRequestFileSystem,u=e.requestFileSystem||a||e.mozRequestFileSystem,c=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},d=0,f=[],s=function(){for(var e=f.length;e--;){var t=f[e];"string"==typeof t?n().revokeObjectURL(t):t.remove()}f.length=0},l=function(e,t,n){t=[].concat(t);for(var o=t.length;o--;){var r=e["on"+t[o]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){c(e)}}},v=function(t,c){var s,v,p,w=this,y=t.type,m=!1,h=function(){var e=n().createObjectURL(t);return f.push(e),e},E=function(){l(w,"writestart progress write writeend".split(" "))},g=function(){!m&&s||(s=h()),v?v.location.href=s:window.open(s,"_blank"),w.readyState=w.DONE,E()},O=function(e){return function(){if(w.readyState!==w.DONE)return e.apply(this,arguments)}},S={create:!0,exclusive:!1};return w.readyState=w.INIT,c||(c="download"),r?(s=h(),o.href=s,o.download=c,i(o),w.readyState=w.DONE,void E()):(e.chrome&&y&&"application/octet-stream"!==y&&(p=t.slice||t.webkitSlice,t=p.call(t,0,t.size,"application/octet-stream"),m=!0),a&&"download"!==c&&(c+=".download"),("application/octet-stream"===y||a)&&(v=e),u?(d+=t.size,void u(e.TEMPORARY,d,O(function(e){e.root.getDirectory("saved",S,O(function(e){var n=function(){e.getFile(c,S,O(function(e){e.createWriter(O(function(n){n.onwriteend=function(t){v.location.href=e.toURL(),f.push(e),w.readyState=w.DONE,l(w,"writeend",t)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&g()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=w["on"+e]}),n.write(t),w.abort=function(){n.abort(),w.readyState=w.DONE},w.readyState=w.WRITING}),g)}),g)};e.getFile(c,{create:!1},O(function(e){e.remove(),n()}),O(function(e){e.code===e.NOT_FOUND_ERR?n():g()}))}),g)}),g)):void g())},p=v.prototype,w=function(e,t){return new v(e,t)};return p.abort=function(){var e=this;e.readyState=e.DONE,l(e,"abort")},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,e.addEventListener("unload",s,!1),w.unload=function(){s(),e.removeEventListener("unload",s,!1)},w}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs});